class SpecialDays {
    constructor() {
        this.specialDays = [
            {
                date: '2024-09-30',
                title: '第一次相遇',
                description: '凌晨心情不好刷抖音，第一次刷到小t子直播，在外面看了好一会儿看到九月点进去了，运气很好的中了所有福袋',
                emoji: '🎁'
            },
            {
                date: '2024-10-02',
                title: '可爱的兔耳朵',
                description: '截图到了特别可爱的兔耳朵比耶',
                emoji: '🐰'
            },
            {
                date: '2024-10-04',
                title: '八级啦',
                description: '竟然那么快8级了，真的有为拍立得努力的（然后拖到我12级才给我！！拖延症啊拖延症啊',
                emoji: '📷'
            },
            {
                date: '2024-10-13',
                title: '熊猫舞',
                description: '跳了熊猫舞哈哈哈哈，其实还蛮可爱的，也是今天加了vx，其实之前从来没有想过会有那么多联系呢',
                emoji: '🐼'
            },
            {
                date: '2024-10-23',
                title: '第一个一号',
                description: '刷了我人生第一个抖音一号哦',
                emoji: '🏆'
            },
            {
                date: '2024-11-04',
                title: '萌萌照',
                description: '给你画了很可爱的和九月、二宝的萌萌照',
                emoji: '🎨'
            },
            {
                date: '2024-11-06',
                title: '第一首歌',
                description: '点了第一首歌《下雨天》很不自信啊，一直说自己会唱跑调，唱歌难听，才没有呢！',
                emoji: '🎵'
            },
            {
                date: '2024-11-11',
                title: '网吧直播',
                description: '拍了特别萌的手势舞',
                emoji: '💃'
            },
            {
                date: '2024-11-12',
                title: '星际玫瑰',
                description: '户外直播 送了你之前提过一嘴的很喜欢的礼物-星际玫瑰',
                emoji: '🌹'
            },
            {
                date: '2024-11-14',
                title: '甘大师的自画像',
                description: '好吧！12号没听到的歌今天听到了，看到以前的录屏好感慨啊，唱歌特别羞涩不敢唱，现在唱什么歌都信手拈来了',
                emoji: '🎨'
            },
            {
                date: '2024-11-22',
                title: '第一次横屏直播',
                description: '很帅啊！这件衣服真的就穿了一次啊！浅色真的很衬你啊',
                emoji: '📺'
            },
            {
                date: '2024-12-02',
                title: '第一个星守护',
                description: '星守护的第一天 我的第一个 你的第一个！',
                emoji: '⭐'
            },
            {
                date: '2024-12-05',
                title: '大衣直播',
                description: '很帅啊 少被他人的话搞得自己不自信好嘛',
                emoji: '👔'
            },
            {
                date: '2024-12-09',
                title: '九月视频',
                description: '特别可爱的小视频！九月好萌',
                emoji: '🐱'
            },
            {
                date: '2024-12-15',
                title: '第一次满展馆',
                description: '第一次满展馆～',
                emoji: '🎪'
            },
            {
                date: '2024-12-17',
                title: '第一次打游戏',
                description: '第一次打游戏 还是头一次教人打游戏呢 很有天赋呀！又满展馆啦！小展馆变大展馆',
                emoji: '🎮'
            },
            {
                date: '2024-12-18',
                title: '14级啦',
                description: '用云中秘境升了14级 今天特别特别好看！',
                emoji: '⬆️'
            },
            {
                date: '2024-12-21',
                title: '练舞',
                description: '凌晨特别辛苦的练舞 特别努力呀',
                emoji: '💃'
            },
            {
                date: '2024-12-23',
                title: '姐姐真漂亮',
                description: '《姐姐真漂亮》跳的特别特别好 我和朋友们炫耀了好久呢！',
                emoji: '✨'
            },
            {
                date: '2025-01-01',
                title: '跨年',
                description: '一起跨年啦！烟花特效好好看',
                emoji: '🎆'
            },
            {
                date: '2025-01-07',
                title: '手势舞',
                description: '拖了特别特别久的手势舞！！！！小懒猪啊',
                emoji: '🦥'
            },
            {
                date: '2025-01-12',
                title: '特别好看',
                description: '今天也特别好看',
                emoji: '👗'
            },
            {
                date: '2025-01-27',
                title: '姐姐家直播',
                description: '在姐姐家直播很帅的一天',
                emoji: '🏠'
            },
            {
                date: '2025-01-28',
                title: '压岁钱',
                description: '发压岁钱啦',
                emoji: '💰'
            },
            {
                date: '2025-01-29',
                title: '新年快乐',
                description: '你是我第一个说新年快乐的人哦 也是第一个我发压岁钱的！抖音一号终于出现在大展馆上了 以前送都看不到',
                emoji: '🧧'
            },
            {
                date: '2025-01-31',
                title: '舞蹈录屏',
                description: '你会后悔你跳的那些舞哈哈哈哈我全录屏了 以前相册空空荡荡的 现在都是截图和录屏哦',
                emoji: '📱'
            },
            {
                date: '2025-02-04',
                title: '16级',
                description: '16级啦！卡在23：59的尾巴',
                emoji: '🌟'
            },
            {
                date: '2025-02-05',
                title: '宇宙之心',
                description: '我从来没想过我会爱一个离我那么远的人那么久哦 我的一颗宇宙之心我的第一个16级 看了你的录屏真的特别好看啊 特别感谢你这段时间的陪伴',
                emoji: '💫'
            }
        ];
        this.renderTimeline();
    }

    renderTimeline() {
        const timeline = document.querySelector('.timeline');
        this.specialDays
            .sort((a, b) => new Date(a.date) - new Date(b.date))
            .forEach(day => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                
                timelineItem.innerHTML = `
                    <div class="timeline-content">
                        <div class="timeline-date">${this.formatDate(day.date)}</div>
                        <div class="timeline-title">
                            <span class="timeline-emoji">${day.emoji}</span>
                            <h3>${day.title}</h3>
                        </div>
                        <div class="timeline-description">${day.description}</div>
                    </div>
                `;
                
                timeline.appendChild(timelineItem);
            });

        // 添加"未完待续"元素
        const continuingStory = document.createElement('div');
        continuingStory.className = 'timeline-item continuing-story';
        continuingStory.innerHTML = `
            <div class="timeline-content">
                <div class="timeline-title">
                    <h3>故事仍在继续<span class="continuing-dots">...</span></h3>
                </div>
                <div class="timeline-description">
                    期待与你创造更多美好的回忆
                </div>
            </div>
        `;
        timeline.appendChild(continuingStory);
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        const month = date.getMonth() + 1;
        const day = date.getDate();
        return `${month}月${day}日`;
    }
}

class MusicController {
    constructor() {
        this.audio = document.getElementById('bgMusic');
        this.toggleBtn = document.getElementById('musicToggle');
        this.isPlaying = true;

        // 立即尝试播放
        this.forcePlay();
    }

    forcePlay() {
        // 初始化时添加播放状态的样式
        this.toggleBtn.classList.add('playing');

        // 点击按钮切换播放状态
        this.toggleBtn.addEventListener('click', () => {
            if (this.isPlaying) {
                this.pauseMusic();
            } else {
                this.playMusic();
            }
        });

        // 立即取消静音并播放
        this.audio.muted = false;
        this.audio.play();
    }

    playMusic() {
        this.audio.play();
        this.isPlaying = true;
        this.toggleBtn.classList.add('playing');
    }

    pauseMusic() {
        this.audio.pause();
        this.isPlaying = false;
        this.toggleBtn.classList.remove('playing');
    }
}

document.addEventListener('DOMContentLoaded', () => {
    new SpecialDays();
    new MusicController();
}); 