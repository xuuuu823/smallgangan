class SpecialDays {
    constructor() {
        this.specialDays = [
            {
                date: '2024-09-30',
                title: 'ç¬¬ä¸€æ¬¡ç›¸é‡',
                description: 'å‡Œæ™¨å¿ƒæƒ…ä¸å¥½åˆ·æŠ–éŸ³ï¼Œç¬¬ä¸€æ¬¡åˆ·åˆ°å°tå­ç›´æ’­ï¼Œåœ¨å¤–é¢çœ‹äº†å¥½ä¸€ä¼šå„¿çœ‹åˆ°ä¹æœˆç‚¹è¿›å»äº†ï¼Œè¿æ°”å¾ˆå¥½çš„ä¸­äº†æ‰€æœ‰ç¦è¢‹',
                emoji: 'ğŸ'
            },
            {
                date: '2024-10-02',
                title: 'å¯çˆ±çš„å…”è€³æœµ',
                description: 'æˆªå›¾åˆ°äº†ç‰¹åˆ«å¯çˆ±çš„å…”è€³æœµæ¯”è€¶',
                emoji: 'ğŸ°'
            },
            {
                date: '2024-10-04',
                title: 'å…«çº§å•¦',
                description: 'ç«Ÿç„¶é‚£ä¹ˆå¿«8çº§äº†ï¼ŒçœŸçš„æœ‰ä¸ºæ‹ç«‹å¾—åŠªåŠ›çš„ï¼ˆç„¶åæ‹–åˆ°æˆ‘12çº§æ‰ç»™æˆ‘ï¼ï¼æ‹–å»¶ç—‡å•Šæ‹–å»¶ç—‡å•Š',
                emoji: 'ğŸ“·'
            },
            {
                date: '2024-10-13',
                title: 'ç†ŠçŒ«èˆ',
                description: 'è·³äº†ç†ŠçŒ«èˆå“ˆå“ˆå“ˆå“ˆï¼Œå…¶å®è¿˜è›®å¯çˆ±çš„ï¼Œä¹Ÿæ˜¯ä»Šå¤©åŠ äº†vxï¼Œå…¶å®ä¹‹å‰ä»æ¥æ²¡æœ‰æƒ³è¿‡ä¼šæœ‰é‚£ä¹ˆå¤šè”ç³»å‘¢',
                emoji: 'ğŸ¼'
            },
            {
                date: '2024-10-23',
                title: 'ç¬¬ä¸€ä¸ªä¸€å·',
                description: 'åˆ·äº†æˆ‘äººç”Ÿç¬¬ä¸€ä¸ªæŠ–éŸ³ä¸€å·å“¦',
                emoji: 'ğŸ†'
            },
            {
                date: '2024-11-04',
                title: 'èŒèŒç…§',
                description: 'ç»™ä½ ç”»äº†å¾ˆå¯çˆ±çš„å’Œä¹æœˆã€äºŒå®çš„èŒèŒç…§',
                emoji: 'ğŸ¨'
            },
            {
                date: '2024-11-06',
                title: 'ç¬¬ä¸€é¦–æ­Œ',
                description: 'ç‚¹äº†ç¬¬ä¸€é¦–æ­Œã€Šä¸‹é›¨å¤©ã€‹å¾ˆä¸è‡ªä¿¡å•Šï¼Œä¸€ç›´è¯´è‡ªå·±ä¼šå”±è·‘è°ƒï¼Œå”±æ­Œéš¾å¬ï¼Œæ‰æ²¡æœ‰å‘¢ï¼',
                emoji: 'ğŸµ'
            },
            {
                date: '2024-11-11',
                title: 'ç½‘å§ç›´æ’­',
                description: 'æ‹äº†ç‰¹åˆ«èŒçš„æ‰‹åŠ¿èˆ',
                emoji: 'ğŸ’ƒ'
            },
            {
                date: '2024-11-12',
                title: 'æ˜Ÿé™…ç«ç‘°',
                description: 'æˆ·å¤–ç›´æ’­ é€äº†ä½ ä¹‹å‰æè¿‡ä¸€å˜´çš„å¾ˆå–œæ¬¢çš„ç¤¼ç‰©-æ˜Ÿé™…ç«ç‘°',
                emoji: 'ğŸŒ¹'
            },
            {
                date: '2024-11-14',
                title: 'ç”˜å¤§å¸ˆçš„è‡ªç”»åƒ',
                description: 'å¥½å§ï¼12å·æ²¡å¬åˆ°çš„æ­Œä»Šå¤©å¬åˆ°äº†ï¼Œçœ‹åˆ°ä»¥å‰çš„å½•å±å¥½æ„Ÿæ…¨å•Šï¼Œå”±æ­Œç‰¹åˆ«ç¾æ¶©ä¸æ•¢å”±ï¼Œç°åœ¨å”±ä»€ä¹ˆæ­Œéƒ½ä¿¡æ‰‹æ‹ˆæ¥äº†',
                emoji: 'ğŸ¨'
            },
            {
                date: '2024-11-22',
                title: 'ç¬¬ä¸€æ¬¡æ¨ªå±ç›´æ’­',
                description: 'å¾ˆå¸…å•Šï¼è¿™ä»¶è¡£æœçœŸçš„å°±ç©¿äº†ä¸€æ¬¡å•Šï¼æµ…è‰²çœŸçš„å¾ˆè¡¬ä½ å•Š',
                emoji: 'ğŸ“º'
            },
            {
                date: '2024-12-02',
                title: 'ç¬¬ä¸€ä¸ªæ˜Ÿå®ˆæŠ¤',
                description: 'æ˜Ÿå®ˆæŠ¤çš„ç¬¬ä¸€å¤© æˆ‘çš„ç¬¬ä¸€ä¸ª ä½ çš„ç¬¬ä¸€ä¸ªï¼',
                emoji: 'â­'
            },
            {
                date: '2024-12-05',
                title: 'å¤§è¡£ç›´æ’­',
                description: 'å¾ˆå¸…å•Š å°‘è¢«ä»–äººçš„è¯æå¾—è‡ªå·±ä¸è‡ªä¿¡å¥½å˜›',
                emoji: 'ğŸ‘”'
            },
            {
                date: '2024-12-09',
                title: 'ä¹æœˆè§†é¢‘',
                description: 'ç‰¹åˆ«å¯çˆ±çš„å°è§†é¢‘ï¼ä¹æœˆå¥½èŒ',
                emoji: 'ğŸ±'
            },
            {
                date: '2024-12-15',
                title: 'ç¬¬ä¸€æ¬¡æ»¡å±•é¦†',
                description: 'ç¬¬ä¸€æ¬¡æ»¡å±•é¦†ï½',
                emoji: 'ğŸª'
            },
            {
                date: '2024-12-17',
                title: 'ç¬¬ä¸€æ¬¡æ‰“æ¸¸æˆ',
                description: 'ç¬¬ä¸€æ¬¡æ‰“æ¸¸æˆ è¿˜æ˜¯å¤´ä¸€æ¬¡æ•™äººæ‰“æ¸¸æˆå‘¢ å¾ˆæœ‰å¤©èµ‹å‘€ï¼åˆæ»¡å±•é¦†å•¦ï¼å°å±•é¦†å˜å¤§å±•é¦†',
                emoji: 'ğŸ®'
            },
            {
                date: '2024-12-18',
                title: '14çº§å•¦',
                description: 'ç”¨äº‘ä¸­ç§˜å¢ƒå‡äº†14çº§ ä»Šå¤©ç‰¹åˆ«ç‰¹åˆ«å¥½çœ‹ï¼',
                emoji: 'â¬†ï¸'
            },
            {
                date: '2024-12-21',
                title: 'ç»ƒèˆ',
                description: 'å‡Œæ™¨ç‰¹åˆ«è¾›è‹¦çš„ç»ƒèˆ ç‰¹åˆ«åŠªåŠ›å‘€',
                emoji: 'ğŸ’ƒ'
            },
            {
                date: '2024-12-23',
                title: 'å§å§çœŸæ¼‚äº®',
                description: 'ã€Šå§å§çœŸæ¼‚äº®ã€‹è·³çš„ç‰¹åˆ«ç‰¹åˆ«å¥½ æˆ‘å’Œæœ‹å‹ä»¬ç‚«è€€äº†å¥½ä¹…å‘¢ï¼',
                emoji: 'âœ¨'
            },
            {
                date: '2025-01-01',
                title: 'è·¨å¹´',
                description: 'ä¸€èµ·è·¨å¹´å•¦ï¼çƒŸèŠ±ç‰¹æ•ˆå¥½å¥½çœ‹',
                emoji: 'ğŸ†'
            },
            {
                date: '2025-01-07',
                title: 'æ‰‹åŠ¿èˆ',
                description: 'æ‹–äº†ç‰¹åˆ«ç‰¹åˆ«ä¹…çš„æ‰‹åŠ¿èˆï¼ï¼ï¼ï¼å°æ‡’çŒªå•Š',
                emoji: 'ğŸ¦¥'
            },
            {
                date: '2025-01-12',
                title: 'ç‰¹åˆ«å¥½çœ‹',
                description: 'ä»Šå¤©ä¹Ÿç‰¹åˆ«å¥½çœ‹',
                emoji: 'ğŸ‘—'
            },
            {
                date: '2025-01-27',
                title: 'å§å§å®¶ç›´æ’­',
                description: 'åœ¨å§å§å®¶ç›´æ’­å¾ˆå¸…çš„ä¸€å¤©',
                emoji: 'ğŸ '
            },
            {
                date: '2025-01-28',
                title: 'å‹å²é’±',
                description: 'å‘å‹å²é’±å•¦',
                emoji: 'ğŸ’°'
            },
            {
                date: '2025-01-29',
                title: 'æ–°å¹´å¿«ä¹',
                description: 'ä½ æ˜¯æˆ‘ç¬¬ä¸€ä¸ªè¯´æ–°å¹´å¿«ä¹çš„äººå“¦ ä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªæˆ‘å‘å‹å²é’±çš„ï¼æŠ–éŸ³ä¸€å·ç»ˆäºå‡ºç°åœ¨å¤§å±•é¦†ä¸Šäº† ä»¥å‰é€éƒ½çœ‹ä¸åˆ°',
                emoji: 'ğŸ§§'
            },
            {
                date: '2025-01-31',
                title: 'èˆè¹ˆå½•å±',
                description: 'ä½ ä¼šåæ‚”ä½ è·³çš„é‚£äº›èˆå“ˆå“ˆå“ˆå“ˆæˆ‘å…¨å½•å±äº† ä»¥å‰ç›¸å†Œç©ºç©ºè¡è¡çš„ ç°åœ¨éƒ½æ˜¯æˆªå›¾å’Œå½•å±å“¦',
                emoji: 'ğŸ“±'
            },
            {
                date: '2025-02-04',
                title: '16çº§',
                description: '16çº§å•¦ï¼å¡åœ¨23ï¼š59çš„å°¾å·´',
                emoji: 'ğŸŒŸ'
            },
            {
                date: '2025-02-05',
                title: 'å®‡å®™ä¹‹å¿ƒ',
                description: 'æˆ‘ä»æ¥æ²¡æƒ³è¿‡æˆ‘ä¼šçˆ±ä¸€ä¸ªç¦»æˆ‘é‚£ä¹ˆè¿œçš„äººé‚£ä¹ˆä¹…å“¦ æˆ‘çš„ä¸€é¢—å®‡å®™ä¹‹å¿ƒæˆ‘çš„ç¬¬ä¸€ä¸ª16çº§ çœ‹äº†ä½ çš„å½•å±çœŸçš„ç‰¹åˆ«å¥½çœ‹å•Š ç‰¹åˆ«æ„Ÿè°¢ä½ è¿™æ®µæ—¶é—´çš„é™ªä¼´',
                emoji: 'ğŸ’«'
            }
        ];
        this.renderTimeline();
    }

    renderTimeline() {
        const timeline = document.querySelector('.timeline');
        this.specialDays
            .sort((a, b) => new Date(a.date) - new Date(b.date))
            .forEach(day => {
                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';
                
                timelineItem.innerHTML = `
                    <div class="timeline-content">
                        <div class="timeline-date">${this.formatDate(day.date)}</div>
                        <div class="timeline-title">
                            <span class="timeline-emoji">${day.emoji}</span>
                            <h3>${day.title}</h3>
                        </div>
                        <div class="timeline-description">${day.description}</div>
                    </div>
                `;
                
                timeline.appendChild(timelineItem);
            });

        // æ·»åŠ "æœªå®Œå¾…ç»­"å…ƒç´ 
        const continuingStory = document.createElement('div');
        continuingStory.className = 'timeline-item continuing-story';
        continuingStory.innerHTML = `
            <div class="timeline-content">
                <div class="timeline-title">
                    <h3>æ•…äº‹ä»åœ¨ç»§ç»­<span class="continuing-dots">...</span></h3>
                </div>
                <div class="timeline-description">
                    æœŸå¾…ä¸ä½ åˆ›é€ æ›´å¤šç¾å¥½çš„å›å¿†
                </div>
            </div>
        `;
        timeline.appendChild(continuingStory);
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        const month = date.getMonth() + 1;
        const day = date.getDate();
        return `${month}æœˆ${day}æ—¥`;
    }
}

class MusicController {
    constructor() {
        this.audio = document.getElementById('bgMusic');
        this.toggleBtn = document.getElementById('musicToggle');
        this.isPlaying = true;

        // ç«‹å³å°è¯•æ’­æ”¾
        this.forcePlay();
    }

    forcePlay() {
        // åˆå§‹åŒ–æ—¶æ·»åŠ æ’­æ”¾çŠ¶æ€çš„æ ·å¼
        this.toggleBtn.classList.add('playing');

        // ç‚¹å‡»æŒ‰é’®åˆ‡æ¢æ’­æ”¾çŠ¶æ€
        this.toggleBtn.addEventListener('click', () => {
            if (this.isPlaying) {
                this.pauseMusic();
            } else {
                this.playMusic();
            }
        });

        // ç«‹å³å–æ¶ˆé™éŸ³å¹¶æ’­æ”¾
        this.audio.muted = false;
        this.audio.play();
    }

    playMusic() {
        this.audio.play();
        this.isPlaying = true;
        this.toggleBtn.classList.add('playing');
    }

    pauseMusic() {
        this.audio.pause();
        this.isPlaying = false;
        this.toggleBtn.classList.remove('playing');
    }
}

document.addEventListener('DOMContentLoaded', () => {
    new SpecialDays();
    new MusicController();
}); 